<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>VIENNA</title>
  <link rel="stylesheet" href="styles.css">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
</head>
<body>
  <div id="initialScreen" class="screen">
      <p id="instructionText">A continuación, usted verá videos de una persona caminando en unos pasillos. Mientras hace esto, la persona se detiene en las puertas y en las intersecciones de los pasillos para mirar a su alrededor. La persona puede girar en un cruce o darse la vuelta y caminar de regreso.</p>
      <div class="button-container">
          <button id="startButton">Comenzar</button>
          <button id="fullScreenButton">Pantalla Completa</button>
      </div>
  </div>

  <div id="instructionScreen2" class="screen">
      <p id="instructionText">Su tarea consistirá en intentar seguir mentalmente la ubicación actual de la persona e indicar, al final, qué puerta ha elegido usando el mapa que se muestra al lado del vídeo. El mapa no cambia su orientación; ni siquiera si la persona se da vuelta. Tan pronto como la persona haya elegido una puerta extendiendo su brazo hacia la manilla, por favor, toque la puerta correspondiente en el mapa.</p>
      <div class="button-container">
          <button id="nextButton1" class="arrow-button"></button>
      </div>
  </div>

  <div id="instructionScreen3" class="screen">
      <p id="instructionText">Aquí usted puede ver un ejemplo de un mapa. Los iconos azules representan puertas en partes específicas del pasillo. La posición inicial de la persona está marcada en el mapa con la palabra 'Inicio'.</p>
      <img src="img/ejemplo.jpg" alt="">
      <div class="button-container">
          <button id="nextButton2" class="arrow-button"></button>
      </div>
  </div>

  <div id="instructionScreen4" class="screen">
      <p id="instructionText">Ahora usted completará una ronda de práctica. Los videos NO SE PUEDEN pausar y NO SE PUEDEN repetir, así que, por favor, preste mucha atención mientras se reproducen los videos. El mapa estará en el lado derecho de la pantalla. Después de unos segundos, el video comenzará a reproducirse automáticamente. Aproveche este tiempo para ubicar la posición inicial de la persona en el mapa.</p>
      <div class="button-container">
          <button id="nextButton3" class="arrow-button"></button>
      </div>
  </div>

  <div id="practiceInstructionScreen" class="screen">
      <p id="instructionText">I1</p>
      <video id="practiceVideo1" src="videos/Instructions.mp4" width="600" height="400" autoplay muted></video>

      <div class="button-container">
          <button id="nextButtonPracticeInstruction" class="arrow-button"></button>
      </div>
  </div>

  <div id="practiceScreen1" class="screen">
      <p>P1</p>
      <div class="container-fluid">
          <div class="row align-items-center">
              <div class="col-8 d-flex justify-content-center align-items-center">
                  <video id="practiceVideo2" src="videos/Practice_1.mp4" width="100%" autoplay muted></video>
              </div>
              <div class="col-4 d-flex flex-column align-items-center">
                  <canvas id="practiceCanvas1" width="600" height="400"></canvas>
              </div>
          </div>
          <div class="button-container">
              <button id="nextButtonPractice1" class="arrow-button"></button>
          </div>
      </div>
  </div>

  <div id="practiceScreen2" class="screen">
    <p>P2</p>
      <div class="container-fluid">
          <div class="row align-items-center">
              <div class="col-8 d-flex justify-content-center align-items-center">
                  <video id="practiceVideo3" src="videos/Practice_2.mp4" width="100%" autoplay muted></video>
              </div>
              <div class="col-4 d-flex flex-column align-items-center">
                  <canvas id="practiceCanvas2" width="600" height="400"></canvas>
              </div>
          </div>
          <div class="button-container">
              <button id="nextButtonPractice2" class="arrow-button"></button>
          </div>
      </div>
  </div>

  <div id="preTestInstructionScreen" class="screen">
      <p id="instructionText">Ahora comenzará la tarea de verdad. Recuerde intentar seguir mentalmente la ubicación actual de la persona en el mapa. Los videos no se pueden pausar ni repetir. Si no está seguro de qué puerta ha sido elegida, señale la opción que crea más probable. Por favor, responda tan rápido como pueda. ¿Está listo(a)?</p>
      <div class="button-container">
          <button id="nextButtonPreTestInstruction" class="arrow-button"></button>
      </div>
  </div>

  <div id="testScreen" class="screen">
      <div class="container-fluid">
          <div id="header">
              <h2 class="badge bg-light text-dark shadow" id="trialIndicator">E1</h2>
          </div>
          <div class="row align-items-center">
              <div class="col-8 d-flex justify-content-center align-items-center">
                  <video id="testVideo" src="videos/Test_1.mp4" width="100%" autoplay muted></video>
              </div>
              <div class="col-4 d-flex flex-column align-items-center">
                  <canvas id="imageCanvas" width="600" height="400"></canvas>
                  <div id="buttons" style="display: none;">
                      <button id="validateButton">Validar Selecciones</button>
                      <button id="showButton">Mostrar Puertas Correctas</button>
                      <button id="hideButton">Ocultar Puertas Correctas</button>
                      <button id="prevButton">Imagen Anterior</button>
                  </div>
                  <div id="results"></div>
              </div>
          </div>
          <div class="button-container">
              <button id="nextButtonTest1" class="arrow-button"></button>
          </div>
      </div>
  </div>

  <div id="completionScreen" class="screen">
      <h2>Se han completado todas las imágenes.</h2>
      <button id="downloadCSVButton">Descargar Respuestas (CSV)</button>
  </div>

  <script src="script.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/5.3.0/papaparse.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
</body>
</html>
